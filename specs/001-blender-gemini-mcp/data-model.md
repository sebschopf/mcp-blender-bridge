# Data Model: Blender-Gemini MCP Integration

This document defines the primary data entities used for communication and state management within the system.

## 1. ChatMessage

Represents a single message in the conversation between the user and the AI.

-   **Source**: `USER` or `AI`
-   **Content**: `string` (The text of the message)
-   **Timestamp**: `datetime`

## 2. ToolCall

A structured command generated by the AI Model for the Controller to execute. This is the primary object for the secure communication channel.

-   **ToolName**: `string` (e.g., "create_cube", "move_object")
-   **Parameters**: `dict` (A dictionary of key-value pairs specific to the tool, e.g., `{"size": 2, "material": "wood"}`)

## 3. BpyCommand

The low-level, validated command sent from the Controller to the Blender Peripheral.

-   **CommandType**: `string` (e.g., "EXECUTE_BPY")
-   **Script**: `string` (A small, specific snippet of Python code using the `bpy` API, e.g., `bpy.ops.mesh.primitive_cube_add(size=2)`)
-   **RequiresConfirmation**: `boolean` (Indicates if the command is destructive and requires a final user OK)

## 4. CommandRequest (API Model)

The JSON object sent from the Blender Addon to the Controller's `/chat` endpoint.

-   **SessionID**: `string` (A unique identifier for the Blender session)
-   **Message**: `string` (The user's latest prompt)

## 5. CommandResponse (API Model)

The JSON object sent from the Controller back to the Blender Addon.

-   **AiMessage**: `string` (The AI's text response to the user)
-   **Commands**: `list[BpyCommand]` (A list of commands for Blender to execute)
-   **Status**: `string` (e.g., "AWAITING_USER_INPUT", "EXECUTING")
